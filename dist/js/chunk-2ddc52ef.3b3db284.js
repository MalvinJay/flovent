(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ddc52ef"],{"0531":function(e,t,s){},73334:function(e,t,s){"use strict";var a=s("0d58"),n=s("2621"),r=s("52a7"),i=s("4bf8"),o=s("626a"),c=Object.assign;e.exports=!c||s("79e5")(function(){var e={},t={},s=Symbol(),a="abcdefghijklmnopqrst";return e[s]=7,a.split("").forEach(function(e){t[e]=e}),7!=c({},e)[s]||Object.keys(c({},t)).join("")!=a})?function(e,t){var s=i(e),c=arguments.length,u=1,l=n.f,d=r.f;while(c>u){var h,p=o(arguments[u++]),m=l?a(p).concat(l(p)):a(p),f=m.length,g=0;while(f>g)d.call(p,h=m[g++])&&(s[h]=p[h])}return s}:c},"8b7e":function(e,t,s){"use strict";var a=s("0531"),n=s.n(a);n.a},e10f:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{attrs:{"fill-height":"",fluid:"","grid-list-xl":""}},[s("v-layout",{attrs:{"justify-center":"",wrap:""}},[s("v-snackbar",{attrs:{color:e.color,top:!0,right:!0,dark:""},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[s("div",[e._v(e._s(e.message))]),s("v-icon",{attrs:{size:"16"},on:{click:function(t){e.snackbar=!1}}},[e._v("\n          mdi-close-circle\n        ")])],1),s("v-flex",{attrs:{md12:""}},[s("material-card",{attrs:{color:"green",title:"Purchases",text:"A list of purchases and corresponding histories",filter:!0,page:"purchases"}},[s("v-card-title",{staticClass:"pa-0 pb-4"},[s("v-text-field",{attrs:{icon:"mdi-meteor",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),s("v-spacer")],1),s("v-data-table",{attrs:{headers:e.headers,items:e.filteredProducts,loading:e.loading,search:e.search,pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"headerCell",fn:function(t){var a=t.header;return[s("span",{staticClass:"subheading font-weight-light text-success text--darken-3",domProps:{textContent:e._s(a.text)}})]}},{key:"items",fn:function(t){return[s("tr",{class:[{fail:"failed"===t.item.status},{"bold-600":"paid"===t.item.status}],on:{click:function(e){t.expanded=!t.expanded}}},[s("td",[e._v(e._s(t.item.reference))]),s("td",[e._v(e._s(t.item.status))]),s("td",[e._v(e._s(t.item.previous_quantity))]),s("td",[e._v(e._s(t.item.current_quantity))]),s("td",[e._v(e._s(t.item.customer_number||"N/A"))]),s("td",[e._v(e._s(t.item.product.name||"N/A"))]),s("td",[e._v(e._s(e._f("moment")(t.item.created_at,"dddd, MMMM Do YYYY, hh:mm a")))]),s("td",{staticClass:"justify-center px-0"},["pending"===t.item.status||"confirmation required"===t.item.status?s("i",{staticClass:"fas fa-redo-alt pa-2 cursor",on:{click:function(s){e.resendHook(t.item.reference)}}}):e._e()])])]}}])},[s("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1),s("div",{staticClass:"text-xs-right pt-2"},[s("v-pagination",{attrs:{length:e.pages,"prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right","total-visible":7,input:"",circle:""},on:{next:e.nextItem,previous:e.previousItem},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})],1)],1)],1),s("v-flex",{attrs:{md12:""}})],1)],1)},n=[],r=s("be94"),i=(s("f751"),s("cadf"),s("551c"),s("097d"),s("2f62")),o={name:"Purchases",data:function(){return{hook:!1,expand:!1,pagination:{descending:!0},snackbar:!1,message:"This is a temp message",color:"success",colors:["purple","info","success","warning","error"],dialog:!1,dialog1:!1,headers:[{text:"Purchase Ref.",value:"reference"},{text:"Status",value:"status"},{text:"Prev. Qty",value:"previous_quantity"},{text:"Current Qty",value:"current_quantity"},{text:"Customer No.",value:"name"},{text:"Product",value:"name"},{text:"Date",value:"date"},{text:"",value:""}],DetailsHeader:[{text:"Purchase Ref.",value:"reference"},{text:"Previous Quantity",value:"previous_quantity"},{text:"Updated Quantity",value:"current_quantity"},{text:"Remarks",value:"remarks"},{text:"Customer No.",value:"name"},{text:"Product",value:"phone"},{text:"Date",value:"date"}],items:[],product:[],editedIndex:-1,confirm:!1,search:""}},methods:{resendHook:function(e){var t=this;this.hook=!0;var s={transact_ref:e};this.$store.dispatch("sendHook",s).then(function(e){e.data.success?(t.color="success",t.message=e.data.response.message,t.snackbar=!0):(t.message=e.data.response.message,t.color="warning",t.snackbar=!0)}).catch(function(e){t.message="".concat(e),t.color="error",t.snackbar=!0})},fetchPurchases:function(){this.$store.dispatch("getPurchases",{cache:!1})},editItem:function(e){this.editedIndex=0,console.log("Item",e),this.dialog=!0},deleteItem:function(e){var t=this;this.dialog1=!0,this.confirm&&this.$store.dispatch("deleteProduct",e).then(function(){response.data.status?(t.message=response.data.response.message,t.color="success",t.snackbar=!0,t.close()):(t.message=response.data.response.message,t.color="error",t.snackbar=!0)}).catch(function(e){t.message="An error occured, please try again",t.color="error",t.snackbar=!0})},close:function(){var e=this;this.dialog=!1,this.dialog1=!1,setTimeout(function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1},300)},save:function(){var e=this;this.editedIndex>-1?console.log("what is this",this.product[this.editedIndex]):(console.log("Product to be saved!!",this.editedItem),this.$store.dispatch("createProduct",this.editedItem).then(function(){response.data.status?(e.message=response.data.response.message,e.color="success",e.snackbar=!0,e.close()):(e.message=response.data.response.message,e.color="error",e.snackbar=!0)}).catch(function(t){e.message="An error occured, please try again",e.color="error",e.snackbar=!0}))},snack:function(){this.top=!1,this.right=!1;for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];for(var a=0;a<t.length;a++){var n=t[a];this[n]=!0}this.color=this.colors[Math.floor(Math.random()*this.colors.length)],this.snackbar=!0},clickRow:function(e){this.$router.push("/purchases/".concat(e))},nextItem:function(e){console.log("Moving to the next item:",e)},previousItem:function(e){console.log("Moving to the previous item:",e)}},created:function(){this.$store.dispatch("getPurchases")},computed:Object(r["a"])({},Object(i["b"])({purchases:"purchases",state:"purchasesState",meta:"purchasesMeta"}),{filteredProducts:function(){return this.purchases},loading:function(){return"LOADING"===this.state},formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"},pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)},total:function(){return this.meta.totalCount},paginate:function(){return{descending:!0,page:this.meta.page,rowsPerPage:this.meta.limit,totalItems:this.meta.totalCount}},failed:function(){},pending:function(){}}),watch:{dialog:function(e){e||this.close()}}},c=o,u=(s("8b7e"),s("2877")),l=Object(u["a"])(c,a,n,!1,null,null,null);l.options.__file="Purchases.vue";t["default"]=l.exports},f751:function(e,t,s){var a=s("5ca1");a(a.S+a.F,"Object",{assign:s("73334")})}}]);
//# sourceMappingURL=chunk-2ddc52ef.3b3db284.js.map